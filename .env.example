# metaHead Arena Environment Configuration

# Database Configuration
MONGODB_URI=mongodb://localhost:27017/metahead-arena
JWT_SECRET=your-super-secure-jwt-secret-key-here

# Server Configuration
PORT=3000
NODE_ENV=development

# === Migration Configuration ===

# Colyseus Configuration
COLYSEUS_ENABLED=true
COLYSEUS_PORT=3001
COLYSEUS_URL=ws://localhost:3001

# Kalm Proxy Configuration  
KALM_ENABLED=true
KALM_PORT=3002
KALM_URL=ws://localhost:3002

# Migration Mode
# Options: 'parallel' (both systems running) or 'colyseus-only' 
MIGRATION_MODE=parallel

# === Network Optimization Settings ===

# Kalm Bundle Configuration
KALM_BUNDLE_TIMEOUT=16          # 16ms = ~60fps
KALM_MAX_BUFFER_SIZE=65536      # 64KB max buffer
KALM_COMPRESSION=true           # Enable compression
KALM_ADAPTIVE_QUALITY=true      # Enable adaptive quality

# Bandwidth Management
KALM_PER_CLIENT_LIMIT=102400    # 100KB/s per client
KALM_GLOBAL_LIMIT=10485760      # 10MB/s total server limit
KALM_ADAPTIVE_COMPRESSION=true  # Enable adaptive compression

# Congestion Control
KALM_CONGESTION_ENABLED=true
KALM_DROP_THRESHOLD=0.85        # Drop packets at 85% capacity
KALM_BACKPRESSURE_THRESHOLD=0.75 # Backpressure at 75% capacity

# === Game Configuration ===

# Match Settings
MATCH_DURATION=60               # 60 second matches
ALLOW_TIES=true                 # Allow tie games
MAX_GOALS=null                  # No goal limit (time-based only)

# Anti-cheat Settings
POSITION_VALIDATION=true        # Enable position validation
BALL_AUTHORITY=true             # Enable ball authority validation
MAX_POSITION_DELTA=50           # Max pixels per position update
MAX_VELOCITY=800                # Max velocity in pixels/second

# === Development/Testing ===

# Debug Configuration
DEBUG=false                     # Set to true for debug logging
COLYSEUS_DEBUG=false           # Enable Colyseus debug logging
KALM_DEBUG=false               # Enable Kalm debug logging

# Testing Configuration
ENABLE_COLYSEUS_MONITOR=true   # Enable Colyseus monitor in development
TEST_MODE=false                # Enable test mode features

# === Legacy Socket.IO (for parallel operation) ===

# Socket.IO Configuration (maintained during migration)
SOCKETIO_URL=ws://localhost:3000
SOCKETIO_ENABLED=true          # Keep enabled during parallel operation

# === Performance Monitoring ===

# Metrics Collection
COLLECT_METRICS=true           # Enable performance metrics collection
METRICS_INTERVAL=30000         # Metrics collection interval (30s)
LOG_PERFORMANCE=true           # Log performance metrics

# Health Check Configuration
HEALTH_CHECK_ENABLED=true      # Enable health check endpoints
HEALTH_CHECK_INTERVAL=60000    # Health check interval (60s)

# === Production Overrides ===

# Use these in production environment:
# NODE_ENV=production
# COLYSEUS_ENABLED=true
# KALM_ENABLED=true
# SOCKETIO_ENABLED=false
# DEBUG=false
# ENABLE_COLYSEUS_MONITOR=false